<!DOCTYPE html>

<html lang="en">

  <head>
    <title>Inatel Smart Campus - Demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link type="text/css" rel="stylesheet" href="ar.css">
  </head>

  <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>   

  <!-- Logic script -->
  <script src=ar.js></script>

  <body style="margin : 0px; overflow: hidden;">
      <a-scene 
        embedded
        id="scene"
        vr-mode-ui="enabled: false;"
        renderer="logarithmicDepthBuffer: true;
                  antialias: true;
                  colorManagement: true;
                  sortObjects: true;
                  physicallyCorrectLights: true;
                  maxCanvasWidth: 1920;
                  maxCanvasHeight: 1920;
                  precision: low"
        arjs="trackingMethod: best;
              sourceType: webcam;
              debugUIEnabled: false;" 
      >
        <a-assets>
            <a-asset-item 
              id="button" 
              src="/res/gltf/box.gltf"
            />
            <a-asset-item
              id="predio"
              src="/res/gltf/predioCentral.gltf"
            />
            <a-asset-item
              id="salaNazareth"
              src="/res/gltf/salaNazareth.gltf"
            />
        </a-assets>
        <a-marker 
          button
          id="marker" 
          preset="hiro" 
          emitevents="true"
        > 
          <a-entity 
            cursor="rayOrigin: mouse"
            raycaster="objects: .clickable; useWorldCoordinates: true;"
          ></a-entity> 

          <a-entity 
            material="visible: false"
            position="0.5 1 -0.5"
            light="
              type: point;
              intensity: 3;
              distance: 0;
              decay: .5"
          ></a-entity>

          <a-entity 
            class="clickable" 
            id ="buttonEntity" 
            gltf-model = "#button" 
            position = "1 0 .5" 
            scale = "0.2 0.1 0.2"
          ></a-entity> 

          <a-entity 
            id="predioEntity" 
            gltf-model="#predio" 
            position="0 0 .3" 
            rotation="0 -90 90" 
            scale=".2 .2 .2"
            model-opacity="1"
            animation__zoom_out="
              property: scale; 
              to: 0 0 0; 
              dur: 1600;
              loop: false;
              easing: linear;
              startEvents: zoom_out;
            "
            animation__zoom_in="
              property: scale; 
              to: .2 .2 .2; 
              dur: 1600;
              loop: false;
              easing: linear;
              startEvents: zoom_in;
            "
            animation__rotation="
              property: rotation; 
              from: 0 -90 90;
              to: 360 -90 90; 
              dur: 1600;
              loop: false;
              elasticity: 500;
              easing: easeInOutQuad;
              startEvents: rotate;
            "
          ></a-entity>

          <a-entity 
            id="salaEntity" 
            gltf-model="#salaNazareth" 
            position="10 10 10" 
            model-opacity="0"
            animation__zoom_out="
              property: scale; 
              to: 0 0 0; 
              dur: 1600;
              loop: false;
              easing: linear;
              startEvents: zoom_out;
            "
            animation__zoom_in="
              property: scale; 
              to: .35 .35 .35; 
              dur: 1600;
              loop: false;
              easing: linear;
              startEvents: zoom_in;
            "
            animation__rotation="
              property: rotation; 
              from: 0 -90 45;
              to: 360 -90 45; 
              dur: 1600;
              loop: false;
              elasticity: 500;
              easing: easeInOutQuad;
              startEvents: rotate;
            "
          ></a-entity>

        </a-marker>
        <a-entity camera></a-entity>
      </a-scene>
  </body>
</html>
